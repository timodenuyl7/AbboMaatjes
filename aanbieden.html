
<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aanbieden — AbboMaatjes</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="header">
    <div class="header-left" id="homeLink">
      <div class="logo-mark" id="logoMark">€</div>
      <div><h1 id="siteTitle">AbboMaatjes</h1></div>
    </div>
    <div class="header-right" id="headerRight"><a class="login-link" href="login.html" id="loginLink">Login</a></div>
  </header>

  <main class="container">
    <div class="card">
      <h2>Abonnement aanbieden</h2>
      <form id="offerForm">
        <label>Welke dienst bied je aan?</label>
        <select id="dienstSelect" name="dienst">
          <option value="Netflix">Netflix</option>
          <option value="Spotify Family">Spotify Family</option>
          <option value="Disney+">Disney+</option>
          <option value="Duolingo Family">Duolingo Family</option>
          <option value="Anders">Anders...</option>
        </select>
        <div id="andersField" style="display:none;">
          <label>Welke dienst?</label>
          <input type="text" id="dienstAnders" placeholder="Bijv. Canal+"/>
        </div>

        <label>Totaal prijs abonnement (EUR)</label>
        <input type="number" id="totaalPrijs" required>

        <label>Totaal aantal mensen (incl. jezelf)</label>
        <input type="number" id="totaalMensen" required>

        <div id="pricePerPerson">Prijs per persoon: €0</div>

        <label>Aantal vrije plekken</label>
        <input type="number" id="vrijePlekken" required>

        <label>Logo (optioneel)</label>
        <select id="logoSelect">
          <option value="">-- kies logo (optioneel) --</option>
          <option value="https://cdn.simpleicons.org/netflix/E50914">Netflix</option>
          <option value="https://cdn.simpleicons.org/spotify/1DB954">Spotify</option>
          <option value="https://cdn.simpleicons.org/disney+/113CCF">Disney+</option>
          <option value="https://cdn.simpleicons.org/duolingo/58CC02">Duolingo</option>
        </select>

        <button type="submit" class="btn" style="margin-top:10px">Plaats aanbod</button>
      </form>
      <div id="offerResult" style="margin-top:12px"></div>
    </div>
    <a class="back" href="index.html">⬅️ Terug naar homepage</a>
  </main>

  <script>
    // header links
    document.getElementById('homeLink').addEventListener('click', ()=>{ window.location.href='index.html'; });
    document.getElementById('logoMark').addEventListener('click', ()=>{ window.location.href='index.html'; });
    document.getElementById('siteTitle').addEventListener('click', ()=>{ window.location.href='index.html'; });

    const headerRight = document.getElementById('headerRight');
    const user = JSON.parse(localStorage.getItem('abbo_user')||'null');
    if(user && user.name){
      headerRight.innerHTML = '<div style="font-weight:600">Welkom, '+user.name+'</div>';
    }

    const dienstSelect = document.getElementById('dienstSelect');
    const andersField = document.getElementById('andersField');
    dienstSelect.addEventListener('change',()=>{
      if(dienstSelect.value==='Anders'){
        andersField.style.display='block';
      } else {
        andersField.style.display='none';
      }
    });

    const totaalPrijs = document.getElementById('totaalPrijs');
    const totaalMensen = document.getElementById('totaalMensen');
    const pricePerPersonDiv = document.getElementById('pricePerPerson');

    function updatePPP(){
      const prijs = parseFloat(totaalPrijs.value)||0;
      const mensen = parseInt(totaalMensen.value)||1;
      const per = (prijs/mensen).toFixed(2);
      pricePerPersonDiv.textContent = "Prijs per persoon: €"+per;
    }
    totaalPrijs.addEventListener('input', updatePPP);
    totaalMensen.addEventListener('input', updatePPP);

    const form = document.getElementById('offerForm');
    const resultDiv = document.getElementById('offerResult');
    form.addEventListener('submit', e=>{
      e.preventDefault();
      const dienst = dienstSelect.value;
      const dienstNaam = dienst==='Anders' ? document.getElementById('dienstAnders').value : dienst;
      const prijs = parseFloat(totaalPrijs.value)||0;
      const mensen = parseInt(totaalMensen.value)||1;
      const per = (prijs/mensen).toFixed(2);
      const vrije = parseInt(document.getElementById('vrijePlekken').value)||0;
      const logo = document.getElementById('logoSelect').value || '';
      const ad = {dienstNaam: dienstNaam, totaalPrijs: prijs, ppPrijs: per, vrijePlekken: vrije, totaalMensen: mensen, logo: logo};
      let ads = JSON.parse(localStorage.getItem('abbo_ads')||'[]');
      ads.push(ad);
      localStorage.setItem('abbo_ads', JSON.stringify(ads));
      resultDiv.innerHTML = "<div class='card'><strong>Advertentie geplaatst!</strong><p>"+dienstNaam+" - €"+prijs+" totaal, €"+per+" p.p., Vrije plekken: "+vrije+"</p></div>";
      form.reset();
      updatePPP();
    });
  </script>
</body>
</html>
